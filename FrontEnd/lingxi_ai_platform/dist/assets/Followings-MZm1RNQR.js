import{d as M,r as c,o as $,c as x,a as o,b as l,w as d,e as i,E as _,u as j,f as C,g as D,h as z,s as L,i as w,j as Q,F as R,k as q,l as p,t as b,m as A,_ as G}from"./index-C_Vm-Kx3.js";const H={class:"followings-container"},J={class:"followings-box"},K={class:"top-bar"},O={class:"search-bar"},W={class:"followings-list"},X={class:"following-card-skeleton"},Y={class:"following-info"},Z={class:"following-name"},ee={class:"following-phone"},te={class:"following-bio"},oe={class:"following-actions"},ne={class:"pagination"},se=M({__name:"Followings",setup(ae){const v=j(),r=c(""),g=c(1),f=c(10),h=c(0),u=c(!1),a=c([]),m=async()=>{try{if(u.value=!0,!localStorage.getItem("token")){_.error("请先登录"),v.push("/login");return}await new Promise(n=>setTimeout(n,1e3));const e=[{id:1,username:"宋江",phone_number:"13512345678",bio:"人工智能研究员，专注大模型训练"},{id:2,username:"吴用",phone_number:"13687654321",bio:"后端工程师，主攻分布式系统"},{id:3,username:"卢俊义",phone_number:"13933333333",bio:"UI设计师，擅长交互设计"}];r.value?a.value=e.filter(n=>n.username.includes(r.value)||n.phone_number.includes(r.value)||n.bio.includes(r.value)):a.value=e,h.value=a.value.length}catch{_.error("获取关注列表失败，请稍后重试")}finally{u.value=!1}},B=t=>{A.confirm("确定要取消关注该用户吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{if(!localStorage.getItem("token")){_.error("请先登录"),v.push("/login");return}await new Promise(n=>setTimeout(n,500)),a.value=a.value.filter(n=>n.id!==t),h.value=a.value.length,_.success("已取消关注")}catch{_.error("取消关注失败，请稍后重试")}}).catch(()=>{})},S=t=>!t||t.length!==11?t:t.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"),V=()=>{g.value=1,m()},F=t=>{f.value=t,m()},I=t=>{g.value=t,m()},N=()=>{v.back()};return $(()=>{m()}),(t,e)=>{const n=i("el-button"),P=i("el-input"),T=i("el-empty"),k=i("el-skeleton-item"),U=i("el-skeleton"),y=i("el-card"),E=i("el-pagination");return p(),x("div",H,[o("div",J,[l(y,{class:"followings-card"},{default:d(()=>[o("div",K,[l(n,{onClick:N,icon:C(D)},{default:d(()=>e[3]||(e[3]=[z("返回")])),_:1},8,["icon"]),e[4]||(e[4]=o("h2",null,"我的关注",-1)),e[5]||(e[5]=o("div",{style:{width:"70px"}},null,-1))]),o("div",O,[l(P,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=s=>r.value=s),placeholder:"搜索关注","prefix-icon":C(L),clearable:"",onInput:V},null,8,["modelValue","prefix-icon"])]),o("div",W,[!u.value&&a.value.length===0?(p(),w(T,{key:0,description:"暂无关注的用户"})):Q("",!0),u.value?(p(),w(U,{key:1,loading:u.value,animated:"",count:3},{template:d(()=>[o("div",X,[l(k,{variant:"h3",style:{width:"50%"}}),l(k,{variant:"text",style:{width:"40%"}}),l(k,{variant:"p",style:{width:"80%"}})])]),_:1},8,["loading"])):(p(!0),x(R,{key:2},q(a.value,s=>(p(),w(y,{key:s.id,class:"following-card"},{default:d(()=>[o("div",Y,[o("h3",Z,b(s.username),1),o("p",ee,b(S(s.phone_number)),1),o("p",te,b(s.bio||"这个人很懒，什么都没有留下"),1),o("div",oe,[l(n,{type:"danger",size:"small",onClick:le=>B(s.id)},{default:d(()=>e[6]||(e[6]=[z(" 取消关注 ")])),_:2},1032,["onClick"])])])]),_:2},1024))),128))]),o("div",ne,[l(E,{"current-page":g.value,"onUpdate:currentPage":e[1]||(e[1]=s=>g.value=s),"page-size":f.value,"onUpdate:pageSize":e[2]||(e[2]=s=>f.value=s),total:h.value,"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next",onSizeChange:F,onCurrentChange:I},null,8,["current-page","page-size","total"])])]),_:1})])])}}}),re=G(se,[["__scopeId","data-v-407591b3"]]);export{re as default};
